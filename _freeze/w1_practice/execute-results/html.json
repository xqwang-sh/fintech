{
  "hash": "2afe7c8ed652c8d088e55425d66647d4",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: 第一讲上机实践\n---\n\n\n\n本上机讲义覆盖以下内容：\n\n- 环境安装：Python、Jupyter、VS Code插件\n- 安装验证：Python、Jupyter\n- Python 基础：变量、列表、导入与函数调用\n- 第一个机器学习程序：线性回归的简化体验\n\n## 环境安装详细指南\n\n### Python 安装\n\n**推荐方式1：Python 官方安装包**\n\n- 下载地址：https://www.python.org/downloads\n- 选择最新稳定版本（建议 3.10）\n- 安装时务必勾选 \"Add Python to PATH\"\n- 验证安装：终端运行 `python --version`\n\n**推荐方式2：Anaconda/Miniconda**\n\n- 下载地址：https://www.anaconda.com/download\n- 优点：预装常用科学计算库，环境管理方便\n- 安装步骤：\n  1. 下载对应操作系统的安装包\n  2. 运行安装程序，选择\"为所有用户安装\"或\"仅为我安装\"\n  3. 添加 Anaconda 到系统 PATH（安装时勾选）\n  4. 验证安装：打开终端运行 `python --version`\n\n### Jupyter 安装（可先跳过）\n\n**方式1：通过 pip 安装**\n\n```bash\npip install jupyter\n```\n\n**方式2：通过 conda 安装（如果使用 Anaconda）**\n\n```bash\nconda install jupyter\n```\n\n**启动 Jupyter**\n\n- Jupyter Notebook：终端运行 `jupyter notebook`\n- JupyterLab：终端运行 `jupyter lab`\n- 默认在浏览器中打开 http://localhost:8888\n\n### VS Code 插件安装指南\n\n如果使用 VS Code 进行编程，请安装以下必备插件：\n\n1. **Python** (Microsoft官方插件)\n   - 搜索并安装：`ms-python.python`\n   - 提供 Python 语言支持、调试、代码格式化等功能\n\n2. **Jupyter**（可先跳过）\n   - 搜索并安装：`ms-toolsai.jupyter`\n   - 支持在 VS Code 中运行 .ipynb 文件\n\n3. **Pylance**\n   - 搜索并安装：`ms-python.pylance`\n   - 提供更好的 Python 语言服务器，支持类型检查和智能提示\n\n**安装步骤：**\n\n1. 打开 VS Code\n2. 按 `Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac) 打开命令面板\n3. 输入 `Extensions: Install Extensions`\n4. 搜索上述插件名称并安装\n\n按顺序运行每个单元格，遇到错误先读提示再求助助教。\n\n::: {#cdcde648 .cell message='false' execution_count=2}\n``` {.python .cell-code}\n# 验证 Python 与 Jupyter\nimport sys, subprocess\nprint('Python 版本:', sys.version)\n\n# 安装常用库\n\n# 方式1: 如果你用\"官网方式\"（pip）安装Python，可用如下命令安装常用库(终端/Anaconda Prompt 打开后运行)：\n# pip install numpy pandas matplotlib scikit-learn\n\n# 方式2: 如果你用Anaconda (conda) 安装Python，可用如下conda命令安装常用库：\n# conda install numpy pandas matplotlib scikit-learn\n\n# 方式3: 推荐现代方法 —— 使用 uv 管理包（更快、更安全！）\n# 1. 用pip安装uv（只需一次）：\n# pip install uv\n\n# 2. 之后用uv代替pip安装常用库，命令和pip几乎完全一样，但速度更快、依赖解析更准确：\n# uv pip install numpy pandas matplotlib scikit-learn\n\n# 3. 对于零基础同学，使用 uv 安装包有几个优势：\n# - 管理库更方便：只需一个命令即可一次性安装或更新多个库，不必手动一个个装。\n# - 出错更少：uv 会自动帮你处理库之间的兼容关系，减少出现\"库版本冲突\"的问题。\n# - 安装速度快：uv 下载和安装包通常比 pip 更快，能节省等待时间。\n# - 后续维护简单：你还可以用 uv 快速导出/导入全部依赖，方便以后迁移或在新环境复现。\n# 总结：uv 就像\"自动帮你打理图书馆的管家\"，让我们不用担心安装库的细节，把注意力集中在代码和实验本身，非常适合初学者用来管理项目依赖。\n\n# 验证常用库是否可导入（若失败不报错，仅提示）\nlibs = ['numpy', 'pandas', 'matplotlib', 'sklearn']\nfor lib in libs:\n    try:\n        __import__(lib)\n        print(f'{lib} 导入成功')\n    except Exception as e:\n        print(f'{lib} 导入失败：{e}\\n可用 pip 安装：pip install {lib}')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPython 版本: 3.11.9 (v3.11.9:de54cf5be3, Apr  2 2024, 07:12:50) [Clang 13.0.0 (clang-1300.0.29.30)]\nnumpy 导入成功\npandas 导入成功\nmatplotlib 导入成功\nsklearn 导入成功\n```\n:::\n:::\n\n\n### 如果库导入失败，如何安装？\n\n**方式1：使用 pip 安装（如果使用官网 Python 安装包）**\n\n```bash\npip install numpy pandas matplotlib scikit-learn\n```\n\n**方式2：使用 conda 安装（如果使用 Anaconda）**\n\n```bash\nconda install numpy pandas matplotlib scikit-learn\n```\n\n**方式3：使用国内镜像源（如果下载速度慢）**\n\n```bash\npip install -i https://pypi.tuna.tsinghua.edu.cn/simple numpy pandas matplotlib scikit-learn\n```\n\n**常见问题：**\n\n- 如果提示 `pip 命令找不到`，尝试：`python -m pip install numpy pandas matplotlib scikit-learn`\n- Mac 用户可能需要使用 `pip3` 而不是 `pip`\n\n## 变量与基本运算\n\n**什么是变量？** 变量就像是一个\"盒子\"，用来存储数据。给这个盒子起个名字，就可以随时使用里面的数据。\n\n**Python 中的变量特点：**\n\n- 不需要提前声明类型（Python 会自动识别）\n- 变量名要清晰易懂（比如 `age` 而不是 `a`）\n- 可以随时修改值\n\n下面我们看看具体例子：\n\n::: {#e7494c3b .cell message='false' execution_count=3}\n``` {.python .cell-code}\n# 1. 变量赋值：创建变量并存储数据\nage = 20          # 整数（int）：存储年龄\nprice = 50.5      # 浮点数（float）：存储价格，带小数\nname = \"Alice\"    # 字符串（str）：存储文本，需要用引号\n\n# 2. 打印变量：查看变量的值\nprint(age)\nprint(price)\nprint(name)\n\n# 3. 基本运算：使用变量进行计算\narea = 100              # 房屋面积（平米）\nprice_per_sqm = 5000   # 每平米价格（元）\ntotal_price = area * price_per_sqm  # 计算总价\nprint(\"总价:\", total_price)\n\n# 4. 查看变量类型：了解变量存储的是什么类型的数据\nprint(type(age))       # <class 'int'> - 整数类型\nprint(type(price))     # <class 'float'> - 浮点数类型\nprint(type(name))      # <class 'str'> - 字符串类型\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n20\n50.5\nAlice\n总价: 500000\n<class 'int'>\n<class 'float'>\n<class 'str'>\n```\n:::\n:::\n\n\n**练习题：** 创建变量 `house_area = 120` 与 `price_per_sqm = 8000`，计算总价并打印。\n\n**提示：** 参考上面的代码，创建两个变量，然后用乘法计算总价。\n\n## 列表\n\n**什么是列表？** 列表就像是一个\"容器\"，可以存储多个数据。列表中的元素有顺序，可以用位置（索引）来访问。\n\n**列表的特点：**\n\n- 用方括号 `[]` 创建\n- 元素之间用逗号分隔\n- 索引从 0 开始（第一个元素是 `[0]`，第二个是 `[1]`）\n- 可以用 `-1` 访问最后一个元素\n- 可以随时添加、删除元素\n\n下面我们学习列表的基本操作：\n\n::: {#5cd4136d .cell message='false' execution_count=4}\n``` {.python .cell-code}\n# 1. 创建列表：存储多个房价数据\nhouse_prices = [100, 150, 200, 250, 300]\n\n# 2. 访问列表元素：使用索引（位置）\nprint(house_prices[0])    # 第一个元素：100（索引从0开始）\nprint(house_prices[-1])  # 最后一个元素：300（-1表示倒数第一个）\n\n# 3. 获取列表长度：查看列表中有多少个元素\nprint(len(house_prices))  # 输出：5\n\n# 4. 添加元素：在列表末尾添加新数据\nhouse_prices.append(350)  # 添加350到列表末尾\nprint(house_prices)        # 输出：[100, 150, 200, 250, 300, 350]\n\n# 5. 遍历列表：依次访问列表中的每个元素\n# for 循环：对列表中的每个元素执行相同操作\nfor p in house_prices:\n    print(p)  # 依次打印每个房价\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n100\n300\n5\n[100, 150, 200, 250, 300, 350]\n100\n150\n200\n250\n300\n350\n```\n:::\n:::\n\n\n**练习题：** 创建一个包含 5 个学生成绩的列表，打印第一个和最后一个成绩。\n\n**提示：**\n\n- 使用方括号创建列表，例如：`[85, 90, 78, 92, 88]`\n- 使用 `[0]` 访问第一个元素，`[-1]` 访问最后一个元素\n\n## 导入库与函数调用\n\n**什么是库？** 库（Library）就像是一个\"工具箱\"，里面装满了别人已经写好的实用工具（函数）。我们不需要自己写代码实现所有功能，直接使用库里的工具就可以了。\n\n**为什么要用库？**\n\n- 节省时间：不需要重复造轮子\n- 功能强大：专业库经过优化，性能更好\n- 标准化：大家都在用，代码更容易理解\n\n**Python 常用库：**\n\n- `math`：数学函数（开方、三角函数等）\n- `statistics`：统计函数（平均值、中位数等）\n- `pandas`：数据处理（后续会学）\n- `matplotlib`：画图（后续会学）\n- `sklearn`：机器学习（后续会学）\n\n下面看看如何使用库：\n\n::: {#311f91d8 .cell message='false' execution_count=5}\n``` {.python .cell-code}\n# 方式1：导入整个库，使用时需要加库名\nimport math              # 导入数学库\nx = 16\nprint(math.sqrt(x))      # 使用 math.sqrt() 计算平方根，输出：4.0\n\n# 方式2：只导入需要的函数，使用时不需要加库名\nfrom statistics import mean  # 从 statistics 库中导入 mean 函数\nscores = [85, 90, 78, 92, 88]\nprint(\"平均分:\", mean(scores))  # 直接使用 mean() 计算平均值，输出：86.6\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n4.0\n平均分: 86.6\n```\n:::\n:::\n\n\n**练习题：** 导入 `statistics` 库，计算 `[10, 20, 30, 40, 50]` 的平均值和中位数。\n\n**提示：**\n\n- 使用 `from statistics import mean, median` 导入两个函数\n- 或者使用 `import statistics`，然后通过 `statistics.mean()` 和 `statistics.median()` 调用\n- 中位数函数是 `median()`，用法和 `mean()` 一样\n\n## 第一个机器学习程序：线性回归\n\n**什么是机器学习？** 简单来说，就是让计算机从数据中\"学习\"规律，然后用学到的规律做预测。\n\n**这个例子要做什么？** 我们要让计算机学习\"房屋面积和价格的关系\"，然后预测新房子的价格。\n\n**机器学习的基本流程：**\n\n1. 准备数据（历史数据：已知面积和价格）\n2. 训练模型（让计算机学习规律）\n3. 预测新数据（用学到的规律预测新房子价格）\n4. 可视化（画图看看效果）\n\n下面我们一步步实现：\n\n::: {#ca58ddde .cell message='false' execution_count=6}\n``` {.python .cell-code}\n# 第一个机器学习程序：房价预测（简化版）\n\n# ========== 第1步：导入必要的库 ==========\nfrom sklearn.linear_model import LinearRegression  # 线性回归模型\nimport matplotlib.pyplot as plt                    # 画图库\n\n# ========== 第2步：准备数据（历史数据）==========\n# 这是我们的\"历史数据\"：8 套房子的面积和价格\nareas = [50, 60, 70, 80, 90, 100, 110, 120]      # 房屋面积（平米）\nprices = [150, 180, 210, 240, 270, 300, 330, 360] # 对应价格（万元）\n\n# 观察：面积越大，价格越高，看起来是线性关系\n\n# ========== 第3步：数据格式转换 ==========\n# sklearn 要求特征 X 是二维数组格式\n# [[50], [60], [70], ...] 而不是 [50, 60, 70, ...]\nX = [[a] for a in areas]  # 特征（输入）：房屋面积\ny = prices                # 标签（输出）：房屋价格\n\n# ========== 第4步：创建模型 ==========\nmodel = LinearRegression()  # 创建一个线性回归模型\n\n# ========== 第5步：训练模型 ==========\n# fit() 就是\"训练\"：让模型从数据中学习规律\n# 模型会找到一条直线，使得这条直线最接近所有数据点\nmodel.fit(X, y)\n\n# ========== 第6步：查看学到的参数 ==========\n# 模型学到的规律可以用一条直线表示：价格 = 斜率 × 面积 + 截距\nprint(\"斜率（每平米价格）:\", model.coef_[0])  # 约 3.0，表示每平米约3万元\nprint(\"截距:\", model.intercept_)              # 直线的截距\n\n# ========== 第7步：预测新数据 ==========\n# 现在用训练好的模型预测 95 平米房子的价格\nnew_area = [[95]]  # 要预测的房子面积（注意格式：二维数组）\npredicted = model.predict(new_area)[0]  # predict() 返回预测结果\nprint(f\"95平米预测价格: {predicted:.1f} 万元\")\n\n# ========== 第8步：可视化 ==========\n# 画图看看模型的拟合效果\nplt.scatter(areas, prices, label='真实数据')           # 散点图：真实数据点\nplt.plot(areas, model.predict(X), color='red', label='拟合直线')  # 红线：模型学到的直线\nplt.xlabel('面积（平米）')\nplt.ylabel('价格（万元）')\nplt.legend()  # 显示图例\nplt.title('房价预测')\nplt.show()    # 显示图形\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n斜率（每平米价格）: 3.0000000000000004\n截距: -2.842170943040401e-14\n95平米预测价格: 285.0 万元\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](w1_practice_files/figure-html/cell-7-output-2.png){width=586 height=449}\n:::\n:::\n\n\n**恭喜！** 你已经完成了第一个机器学习程序！🎉\n\n**理解要点：**\n\n- **训练（fit）**：模型从8个历史数据中学习规律，找到最佳拟合直线\n- **预测（predict）**：用学到的规律预测新数据\n- **可视化**：图形帮助我们直观地看到模型的效果\n\n**常见问题：**\n\n- **Q：为什么 X 要写成 `[[area] for area in areas]`？**\n  - A：sklearn 要求特征必须是二维数组（每行是一个样本），即使只有一个特征也要写成二维格式。后续课程会详细讲解。\n\n- **Q：如果数据不是完美直线会怎样？**\n  - A：模型会找到一条\"最接近\"所有数据点的直线，即使数据不完全在一条直线上。这是线性回归的核心思想：找到最佳拟合。\n\n**互动练习：**\n\n- 尝试修改 `new_area = [[95]]` 为其他面积（如 `[[80]]` 或 `[[120]]`），看看预测结果\n- 尝试在 `areas` 和 `prices` 中添加新的数据点，观察模型如何变化\n\n",
    "supporting": [
      "w1_practice_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}